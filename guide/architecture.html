<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Architecture | Okta Multi Tenant Admin</title>
    <meta name="generator" content="VuePress 1.4.1">
    
    <meta name="description" content="Identity Management for Multi-Tenant Applications">
    <link rel="preload" href="/assets/css/0.styles.647b89b9.css" as="style"><link rel="preload" href="/assets/js/app.450515ec.js" as="script"><link rel="preload" href="/assets/js/2.7119a548.js" as="script"><link rel="preload" href="/assets/js/5.8f22c7be.js" as="script"><link rel="prefetch" href="/assets/js/10.6f6f30df.js"><link rel="prefetch" href="/assets/js/11.2e3204a8.js"><link rel="prefetch" href="/assets/js/12.71d99b0e.js"><link rel="prefetch" href="/assets/js/13.8760065f.js"><link rel="prefetch" href="/assets/js/14.4f1def24.js"><link rel="prefetch" href="/assets/js/15.9fb2c3c4.js"><link rel="prefetch" href="/assets/js/3.eed724d4.js"><link rel="prefetch" href="/assets/js/4.4123bd0c.js"><link rel="prefetch" href="/assets/js/6.33805e7e.js"><link rel="prefetch" href="/assets/js/7.3fc291a8.js"><link rel="prefetch" href="/assets/js/8.6ba0f06d.js"><link rel="prefetch" href="/assets/js/9.18c1fe6e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.647b89b9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://www.okta.com/sites/all/themes/Okta/images/logos/developer/Dev_Logo-02_Large.png" alt="Okta Multi Tenant Admin" class="logo"> <span class="site-name can-hide">Okta Multi Tenant Admin</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/setup/" class="nav-link">
  Setup
</a></div><div class="nav-item"><a href="/api/" class="nav-link">
  API Reference
</a></div> <a href="https://github.com/oktadeveloper/okta-dac" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/setup/" class="nav-link">
  Setup
</a></div><div class="nav-item"><a href="/api/" class="nav-link">
  API Reference
</a></div> <a href="https://github.com/oktadeveloper/okta-dac" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/" aria-current="page" class="sidebar-link">Concepts and Use Cases</a></li><li><a href="/guide/architecture.html" aria-current="page" class="active sidebar-link">Architecture</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/architecture.html#okta-basics-users-groups-apps" class="sidebar-link">Okta Basics: Users, Groups &amp; Apps</a></li><li class="sidebar-sub-header"><a href="/guide/architecture.html#groups" class="sidebar-link">Groups</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/architecture.html#example-1-group-hierarchy" class="sidebar-link">Example 1: Group Hierarchy</a></li><li class="sidebar-sub-header"><a href="/guide/architecture.html#example-2-group-types" class="sidebar-link">Example 2: Group Types</a></li><li class="sidebar-sub-header"><a href="/guide/architecture.html#okta-dac-mapping" class="sidebar-link">okta-dac mapping</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/architecture.html#group-admin-role" class="sidebar-link">Group Admin Role</a></li><li class="sidebar-sub-header"><a href="/guide/architecture.html#idps" class="sidebar-link">IdPs</a></li><li class="sidebar-sub-header"><a href="/guide/architecture.html#the-final-picture" class="sidebar-link">The Final Picture</a></li><li class="sidebar-sub-header"><a href="/guide/architecture.html#next-steps" class="sidebar-link">Next Steps</a></li></ul></li><li><a href="/guide/api-design.html" class="sidebar-link">API</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="architecture"><a href="#architecture" class="header-anchor">#</a> Architecture</h1> <h2 id="okta-basics-users-groups-apps"><a href="#okta-basics-users-groups-apps" class="header-anchor">#</a> Okta Basics: Users, Groups &amp; Apps</h2> <ul><li>An Okta Org supports having only one directory of users, and those users belong to one or more groups.</li> <li>Groups in Okta are flat, but users can belong to any number of groups.</li> <li>Users are <em>assigned</em> to apps.</li> <li>Groups can also be assigned to apps (When a group is assigned to an app, all users of the group are assigned to the app).</li> <li>The user object can store any number of custom attributes.</li> <li>Groups can store a name and description.</li></ul> <p><img src="data:image/png;base64,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" alt="alt text"></p> <h2 id="groups"><a href="#groups" class="header-anchor">#</a> Groups</h2> <p>Although Groups in Okta are flat in structure and only store name and description, it is acceptable practice to use naming convention and/or namespacing to simulate group-types, group hierarchy or nested group structures. <strong>A key feature of Okta groups which allows us to do this is the groups API <a href="https://developer.okta.com/docs/reference/api/groups/#search-groups" target="_blank" rel="noopener noreferrer">search<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> that supports <em>startsWith</em></strong>. Let's illustrate with a couple examples, below.</p> <h3 id="example-1-group-hierarchy"><a href="#example-1-group-hierarchy" class="header-anchor">#</a> Example 1: Group Hierarchy</h3> <p>You can implement nested groups (or group hierarchy) by applying hierarchical namespacing to the group name. For example, a hierarchy looking like the following:
<img src="data:image/png;base64,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" alt="alt text"></p> <p>Can be <em>flattened</em> and represented with the following naming convention:</p> <table><thead><tr><th>Group Name</th></tr></thead> <tbody><tr><td>okta.com</td></tr> <tr><td>okta.com/dac</td></tr> <tr><td>okta.com/dac/admins</td></tr> <tr><td>okta.com/dac/users</td></tr> <tr><td>okta.com/byob</td></tr> <tr><td>okta.com/byob/users</td></tr></tbody></table> <hr> <h3 id="example-2-group-types"><a href="#example-2-group-types" class="header-anchor">#</a> Example 2: Group Types</h3> <p>You can implement group types by prefixing group names with the group type:</p> <table><thead><tr><th>Type</th> <th>Group</th> <th>Naming Convention</th></tr></thead> <tbody><tr><td>role</td> <td>readonly</td> <td>role_readonly</td></tr> <tr><td>role</td> <td>admin</td> <td>role_admin</td></tr> <tr><td>ou</td> <td>sales</td> <td>ou_sales</td></tr> <tr><td>ou</td> <td>engineering</td> <td>ou_engineering</td></tr></tbody></table> <ul><li>In order to list all the groups of a single type, use the search groups API with <code>search string = group type</code></li></ul> <table><thead><tr><th>GET</th> <th><code>https://${yourOktaDomain}/api/v1/Groups?q=${groupType}</code></th></tr></thead> <tbody></tbody></table> <ul><li>In order to search for a group by name (within a group type) simply prefix the search string with the group type</li></ul> <table><thead><tr><th>GET</th> <th><code>https://${yourOktaDomain}/api/v1/Groups?q=${groupType}${startsWith}</code></th></tr></thead> <tbody></tbody></table> <hr> <h3 id="okta-dac-mapping"><a href="#okta-dac-mapping" class="header-anchor">#</a> okta-dac mapping</h3> <h4 id="admins-and-users-groups"><a href="#admins-and-users-groups" class="header-anchor">#</a> ADMINS_ and USERS_ Groups</h4> <p>In the okta-dac project, we use the <em>Example 2</em> design pattern to create 2 types of user groups – 1) Admins, and 2) Users – by prefixing group names with either <strong>ADMINS_</strong> and <strong>USERS_</strong>, respectively. The string following the prefix refers to the tenant name.</p> <p>For example, if we have 2 customers, <code>tenant1</code> and <code>tenant2</code> in our SaaS application, we'll have 2 sets of groups: <code>ADMINS_tenant1</code> + <code>ADMINS_tenant2</code> and <code>USERS_tenant1</code> + <code>USERS_tenant2</code>. Each customer's user is a member of their respective <code>USERS_</code> group. If the user is also a Tenant Admin, they'll be assigned to the <code>ADMINS_</code> group.</p> <p>So with this naming convention in place, we coerced our Okta org into a structure that our SaaS application needs:</p> <p><img src="/assets/img/multitenant.b9dc6b29.png" alt="alt text"></p> <h4 id="superusers-group"><a href="#superusers-group" class="header-anchor">#</a> SUPERUSERS Group</h4> <p>We mentioned &quot;Super Admins&quot; before so let's go over how we modeled this in Okta. As previously described <a href="/guide/#super-admin">here</a>, the &quot;Super Admin&quot; <strong>role</strong> allows access to the <strong>okta-dac Super Admin UI</strong>. As shown in the diagram above, this is simply a <strong>SUPERUSERS</strong> group. The way okta-dac is implemented, if a user belongs to this group, they will see the Super Admin UI when logging into otkta-dac. On the other hand, if they are not in this group, they will see the Tenant Admin UI.</p> <p>How does okta-dac know which UI to present? We <a href="/setup/org-setup.html#_6-add-custom-claims">configure Okta</a> to include the list of groups memberships in users' JWTs. Then, business logic implemented by the okta-dac app inspects the JWT information to determine if the user is a super admin or not.</p> <h4 id="appusers-groups"><a href="#appusers-groups" class="header-anchor">#</a> APPUSERS_ Groups</h4> <p>Another concept of okta-dac is that each tenant has access to a number of products that the SaaS provider provides, but not always to all products (For example, Tenant_A only purchased Product_A, whereas Tenant_B purchased Product_A, Product_B and Product_C). So we model this by setting up the <code>APPUSERS</code> group. For every app/product that a tenant is entitled to, a group <code>APPUSERS_${tenant}_${appId}</code> is created. These groups are assigned to the respective app.</p> <p>So how does okta-dac implement assigning a user to an app/product? Simple: When we assign a user to an app we are simply just adding the user to the group.</p> <p><img src="data:image/png;base64,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" alt="alt text"></p> <h2 id="group-admin-role"><a href="#group-admin-role" class="header-anchor">#</a> Group Admin Role</h2> <p>Okta natively supports <strong>delegated admin</strong> functionality at the group level via the <a href="https://help.okta.com/en/prod/Content/Topics/Security/admin-role-groupadmin.htm" target="_blank" rel="noopener noreferrer">Group Admin Role<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. You can configure rules in Okta to allow users in a group to gain permissions to read and manage a list of (other) groups. Using this functionality, <strong>we configure <code>ADMINS_tenant</code> groups as group-admins-for <code>USERS_tenant</code> + <code>APPUSERS_tenant</code> groups</strong>. And thus, we get the following behavior:</p> <ul><li>Tenant Admins, as members of their own <code>ADMINS_${tenant}</code> group, <strong>can then read and manage users</strong> in their <code>USERS_${tenant}</code> group.</li> <li>They can assign/unassign apps for their tenant users by being able to add/remove <code>USERS_${tenant}</code> users to/from their <code>APPUSERS_${tenant}</code> groups.</li></ul> <div class="custom-block tip"><p class="custom-block-title">Additional Reading</p> <p>Read more about the different <a href="https://help.okta.com/en/prod/Content/Topics/Security/Administrators.htm" target="_blank" rel="noopener noreferrer">Administrator Roles<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> in Okta to get a better understanding of how we leveraged the Group Admin role</p></div> <h2 id="idps"><a href="#idps" class="header-anchor">#</a> IdPs</h2> <p>One key functionality of okta-dac is the ability for Tenant Admins to self configure their own IdPs for SAML authentication. Okta already provides support for <a href="https://developer.okta.com/docs/concepts/identity-providers/" target="_blank" rel="noopener noreferrer">External Identity Providers<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> out of the box. However, since we are adding a custom tenant layer that isn't natively supported by Okta, this means we'll be adding some more custom implementation.</p> <p>In okta-dac, we maintain a mandatory 1:1 mapping between a Tenant and an IdP. This means we always create one IdP per Tenant regardless of whether the Tenant is going to use IdP authentication; IdP settings are simply set to <code>status=inactive</code> where the Tenant is not using IdP authentication.</p> <p>The 1:1 mapping allows us to do a couple things:</p> <ol><li><p>First, we overload IdP and treat it as THE Tenant</p> <ul><li>So, we use the IdP's id as the <code>tenant id</code>.</li> <li>And a bit of implementation detail here...we store this id in the <code>profile.description</code> of the <code>ADMINS_</code> group as a JSON string (We will need it stored here for handly lookup in many places in the app.):</li></ul> <div class="language-json extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;00gpht48f2bSI7jZw0h7&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;created&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-01-29T17:55:02.000Z&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lastUpdated&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-05-02T23:15:32.000Z&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lastMembershipUpdated&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-02-11T23:47:59.000Z&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;objectClass&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;okta:user_group&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;OKTA_GROUP&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;profile&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ADMINS_spidermonkey&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{\&quot;tenantId\&quot;: \&quot;0oaphsztw1XNmNqbb0h7\&quot;}&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>Allows us to implement the <a href="/api/#list-tenants-with-pagination">List Tenants</a> API:</p> <ul><li>This is done by wrapping the <a href="https://developer.okta.com/docs/reference/api/idps/#list-identity-providers" target="_blank" rel="noopener noreferrer">list identity providers<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> API, <strong>which supports pagination</strong>. We simply map its results to display them as Tenant (instead of Idp)</li> <li>Now we can implement reading back thousands of Tenants in paginated results.</li> <li>We could have used <a href="https://developer.okta.com/docs/reference/api/groups/#search-groups" target="_blank" rel="noopener noreferrer">search groups<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to search the <code>ADMINS_</code> groups instead. But this API would not have given us pagination and is limited to 300 results.</li></ul></li></ol> <h2 id="the-final-picture"><a href="#the-final-picture" class="header-anchor">#</a> The Final Picture</h2> <p>Finally, this is how everything maps out:</p> <p><img src="/assets/img/dac-map.37b0ebb1.png" alt="alt text"></p> <ul><li><p>Each Tenant is represented by exactly 1 Idp, 1 <code>ADMINS_${tenant}</code> group, and 1 <code>USERS_${tenant}</code> group, where:</p> <ul><li>Idp represents the Tenant</li> <li>Users in the <code>ADMINS_${tenant}</code> group are Tenant Admins</li> <li>All users belonging to a tenant are members of <code>USERS_${tenant}</code></li></ul></li> <li><p>For each App a tenant is entitled to, there is an <code>APPSUSERS_${tenant}</code> group.</p></li> <li><p>The <code>ADMINS_${tenant}</code> group possesses the <strong>Group Admin role</strong>. It targets itself, the <code>USERS_${tenant}</code>, and all the <code>APPUSERS_${tenant}</code> groups.</p></li> <li><p>Super Admins belong to the <code>SUPERUSERS</code> group</p></li></ul> <hr> <h2 id="next-steps"><a href="#next-steps" class="header-anchor">#</a> Next Steps</h2> <p><strong>Head over to the <a href="api-design">next -&gt;</a> section for a discussion on the backend design.</strong></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/16/2020, 3:12:33 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/" class="prev router-link-active">
        Concepts and Use Cases
      </a></span> <span class="next"><a href="/guide/api-design.html">
        API
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.450515ec.js" defer></script><script src="/assets/js/2.7119a548.js" defer></script><script src="/assets/js/5.8f22c7be.js" defer></script>
  </body>
</html>
